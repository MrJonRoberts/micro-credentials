{% extends "base.html" %}
{% block title %}{% if achievable %}Achievable awards{% else %}My awards{% endif %} · Micro‑Credentialling{% endblock %}
{% block content %}
<div class="d-flex align-items-center mb-3">
  <h1 class="h4 mb-0">
    {% if achievable %}<i class="fa-regular fa-compass me-2"></i>Achievable awards
    {% else %}<i class="fa-solid fa-award me-2"></i>My awards{% endif %}
  </h1>
</div>

{% if achievable %}
  <div class="row g-3">
    {% for a in achievable %}
      <div class="col-md-6 col-lg-4">
        <div class="card h-100">
          <div class="card-body d-flex">
            {% if a.image_filename %}
              <img class="award-img me-3" src="{{ img_base }}/{{ a.image_filename }}" alt="{{ a.name }}">
            {% else %}
              <div class="award-img me-3 bg-secondary d-inline-flex align-items-center justify-content-center text-white">
                <i class="fa-regular fa-image"></i>
              </div>
            {% endif %}
            <div>
              <div class="fw-semibold">{{ a.name }}</div>
              <div class="text-muted small">{{ a.criteria or a.description }}</div>
            </div>
            <div class="ms-auto text-nowrap"><span class="badge text-bg-primary">{{ a.points }} pts</span></div>
          </div>
        </div>
      </div>
    {% else %}
      <p class="text-muted">Nothing to show yet.</p>
    {% endfor %}
  </div>
{% else %}
  <ul class="list-group">
    {% for ach in achievements %}
      <li class="list-group-item d-flex align-items-center">
        {% if ach.award.image_filename %}
          <img class="award-img me-3" src="{{ img_base }}/{{ ach.award.image_filename }}" alt="{{ ach.award.name }}">
        {% endif %}
        <div class="me-auto">
          <a class="fw-semibold link-underline link-underline-opacity-0" href="{{ url_for('participants.my_award_detail', slug=ach.award.slug) }}">
            {{ ach.award.name }}</a>
          <div class="small text-muted">
            Issued {{ ach.issued_at.strftime('%-d %b %Y') if ach.issued_at else '' }}
            {% if ach.issued_by %} by {{ ach.issued_by.first_name }}{% endif %}
          </div>
        </div>
        <span class="badge text-bg-primary">{{ ach.award.points }} pts</span>
      </li>
    {% else %}
      <li class="list-group-item text-muted">No awards yet.</li>
    {% endfor %}
  </ul>
{% endif %}
{% endblock %}
